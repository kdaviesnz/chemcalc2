

[
  [ 'C', 3, [ 5 ], [], [] ],
  [ 'C', 5, [ 3, 8, 24 ], [], [] ],
  [ 'C', 8, [ 5, 9 ], [], [] ],
  [ 'C', 9, [ 8, 11, 17 ], [ 11 ], [] ],
  [ 'C', 11, [ 9, 12 ], [ 9 ], [] ],
  [ 'C', 12, [ 11, 13, 22 ], [ 13 ], [] ],
  [ 'C', 13, [ 12, 15, 18 ], [ 12 ], [] ],
  [ 'C', 15, [ 13, 17 ], [ 17 ], [] ],
  [ 'C', 17, [ 9, 15 ], [ 15 ], [] ],
  [ 'O', 18, [ 13, 21 ], [], [] ],
  [ 'C', 21, [ 18, 22 ], [], [] ],
  [ 'O', 22, [ 12, 21 ], [], [] ],
  [ 'N', 24, [ 5, 28 ], [], [] ],
  [ 'C', 28, [ 24 ], [], [] ]
]
CC(NC)CC9=CCOCOCC=C9 -> not correct

Add double bonds:

[
[ 'C', 3, [ 5 ], [], [] ],
[ 'C', 5, [ 3, 8, 24 ], [], [] ],
[ 'C', 8, [ 5, 9 ], [], [] ],
[ 'C=', 9, [ 8, 11, 17 ], [ 11 ], [] ],
[ 'C', 11, [ 9, 12 ], [ 9 ], [] ],
[ 'C=', 12, [ 11, 13, 22 ], [ 13 ], [] ],
[ 'C', 13, [ 12, 15, 18 ], [ 12 ], [] ],
[ 'C=', 15, [ 13, 17 ], [ 17 ], [] ],
[ 'C', 17, [ 9, 15 ], [ 15 ], [] ],
[ 'O', 18, [ 13, 21 ], [], [] ],
[ 'C', 21, [ 18, 22 ], [], [] ],
[ 'O', 22, [ 12, 21 ], [], [] ],
[ 'N', 24, [ 5, 28 ], [], [] ],
[ 'C', 28, [ 24 ], [], [] ]
]

From pubchem:
C C (C C1= C  C2=  C   (C= C1) O   C  O2) N   C
3 5  8 9   11 12   13  15  17  18  21 22  24  28

If the previous atom is the first atom and has more then one bond, or is not the first atom and has more then two bonds, then
add a bracket to the current atom symbol eg C -> "(C"

[
[ 'C', 3, [ 5 ], [], [] ],
[ 'C', 5, [ 3, 8, 24 ], [], [] ],
[ 'C', 8, [ 5, 9 ], [], [] ],
[ 'C=', 9, [ 8, 11, 17 ], [ 11 ], [] ],
[ 'C', 11, [ 9, 12 ], [ 9 ], [] ],
[ 'C=', 12, [ 11, 13, 22 ], [ 13 ], [] ],
[ 'C', 13, [ 12, 15, 18 ], [ 12 ], [] ],
[ 'C=', 15, [ 13, 17 ], [ 17 ], [] ],
[ 'C', 17, [ 9, 15 ], [ 15 ], [] ],
[ 'O', 18, [ 13, 21 ], [], [] ],
[ 'C', 21, [ 18, 22 ], [], [] ],
[ 'O', 22, [ 12, 21 ], [], [] ],
[ 'N', 24, [ 5, 28 ], [], [] ],
[ 'C', 28, [ 24 ], [], [] ]
]

From pubchem:
C C (C C1= C  C2=  C   (C= C1) O   C  O2) N   C
3 5  8 9   11 12   13  15  17  18  21 22  24  28